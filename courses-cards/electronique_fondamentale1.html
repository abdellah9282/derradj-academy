<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Électricité Industrielle - Course</title>
  <meta name="description" content="Cours d'Électricité Industrielle pour les étudiants en ST, avec vidéos explicatives, fichiers PDF et séances en direct.">

  <!-- الروابط -->
  <link rel="stylesheet" href="course-card-content.css" />
  <link rel="stylesheet" href="/style.css" />
  <script src="/js/search.js" defer></script>
    <link rel="icon" type="image/jpeg" href="../Logo.jpg">

  <script type="module" src="course.js"></script>

</head>
<body data-module="electricite_industrielle">
<!-- HEADER -->
<header class="main-header">
  <div class="left-section">
    <a href="../login/dashboard.html" class="logo">
      <span class="purple">D</span>erradj Academy
    </a>
  </div>

<div class="welcome-banner">
  <div class="welcome-text">
    👋 Welcome <strong id="username">User</strong> — This is a personal account and must not be shared. 
    If sharing is detected, access will be automatically revoked. 
    Please review our <a href="../terms.html" target="_blank">User Terms</a>.
  </div>
</div>




  <nav class="right-links">
    <a href="#" class="btn signup" onclick="logout()">Sign Out</a>
  </nav>
</header>

<!-- MAIN CONTENT -->
<main class="course-content">
  <div class="course-header-box">
    <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap;">
      <h1 class="course-title">Électricité Industrielle</h1>
    </div>

    <div class="instructor-details">
      <p class="instructor-name"><strong>Teacher:</strong> Prof. A Bouzida</p>
      <p class="instructor-bio">Comprehensive course in industrial electricity with real-world applications and examples.</p>
    </div>

    <!-- Booking Section -->
    <div class="live-announcement booking-style">
      <span class="live-icon">📅</span>

      <div class="booking-inline">
        <label for="sessionDuration"><strong>Book a Live Session:</strong></label>
        <select id="sessionDuration" onchange="showReceiptUpload()">
          <option value="">-- Choose duration --</option>
          <option value="15">15 min – 500 DA</option>
          <option value="30">30 min – 900 DA</option>
          <option value="45">45 min – 1300 DA</option>
          <option value="60">1 hour – 1600 DA</option>
        </select>
      </div>

      <div class="upload-inline" id="uploadSection" style="display: none;">
        <input type="file" id="paymentReceipt" accept="image/*, .pdf" />
        <button id="submitBookingButton" onclick="submitBooking()">Send</button>
      </div>

      <div id="booking-message" style="margin-top: 1rem; font-weight: bold;"></div>

      <span class="live-badge">LIVE</span>
    </div>
  </div>

  
  <!-- Course Columns -->
  <div class="course-columns">

    <!-- Left: Video Playlist -->
    <div class="column-left">
      <h2 class="section-title">Video Lessons</h2>

      <div class="playlist-container">
        <h3 class="section-subtitle">Travaux Dirigés (TD)</h3>

        <h4 class="section-subtitle">TD1: Circuits de base</h4>
        <div class="playlist-container">
          <div class="playlist-item" id="videoContainer">
            <img
              src="/ondes et vibrations/01.webp"
              alt="Video Thumbnail"
              class="playlist-thumbnail"
              style="cursor: pointer;"
              onclick="loadMuxVideo()"
            >
            <div class="playlist-info">
              <h4>Video 1: Introduction aux circuits</h4>
              <span class="playlist-status" onclick="loadMuxVideo()" style="cursor:pointer;">▶️ Watch Now</span>
            </div>
          </div>

          <!-- تحميل Mux Player -->
<!-- مكتبة MUX -->
<script src="https://cdn.jsdelivr.net/npm/@mux/mux-player"></script>

<!-- مكتبة Supabase -->
<script type="module">
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

  const supabase = createClient(
    'https://sgcypxmnlyiwljuqvcup.supabase.co',
    'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNnY3lweG1ubHlpd2xqdXF2Y3VwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg3OTI0MTEsImV4cCI6MjA2NDM2ODQxMX0.iwIikgvioT06uPoXES5IN98TwhtePknCuEQ5UFohfCM'
  );

  const moduleName = "electricite_industrielle";
  const playbackId = "WvTsVwOIzUmGwnGycEj02nfL4OHugxZdG00wcz00OTdnnY";

  window.loadMuxVideo = async function () {
    const sessionId = localStorage.getItem("sessionId");

    if (!sessionId) {
      alert("⚠️ الرجاء تسجيل الدخول أولاً.");
      return;
    }

    const { data, error } = await supabase
      .from("registrations")
      .select("modules")
      .eq("session_id", sessionId)
      .maybeSingle();

    if (error || !data) {
      alert("🚫 غير مصرح لك بمشاهدة هذا الفيديو.");
      return;
    }

    const modules = data.modules || [];
    const hasAccess = modules.includes(moduleName);

    if (!hasAccess) {
      alert("🚫 لا تملك صلاحية مشاهدة هذه المادة.");
      return;
    }

    const container = document.getElementById("videoContainer");
    container.innerHTML = `
      <mux-player
        playback-id="${playbackId}"
        metadata-video-title="TD1: Introduction aux circuits"
        stream-type="on-demand"
        autoplay
        style="width: 100%; aspect-ratio: 16/9; max-width: 100%; border-radius: 12px; overflow: hidden;"
      ></mux-player>
    `;
  };


</script>


<div class="playlist-container">
  <div class="playlist-item" id="ytVideoContainer">
    <img
      src="/ondes et vibrations/02.jpg"
      alt="Video Thumbnail"
      class="playlist-thumbnail"
      style="cursor: pointer;"
      onclick="loadYoutubeVideo()"
    >
    <div class="playlist-info">
      <h4>Video 2: Lois de Kirchhoff</h4>
      <span class="playlist-status" onclick="loadYoutubeVideo()" style="cursor:pointer;">▶️ Watch Now</span>
    </div>
  </div>
</div>

<script>
  const youtubeId = "evovy_YIIxA";

  window.loadYoutubeVideo = function () {
    const container = document.getElementById("ytVideoContainer");
    container.innerHTML = `
      <div style="position:relative; width:100%; aspect-ratio:16/9; border-radius:12px; overflow:hidden;">
<div style="position:relative; width:100%; aspect-ratio:16/9; border-radius:12px; overflow:hidden;">
  <iframe
    src="https://www.youtube-nocookie.com/embed/evovy_YIIxA?autoplay=1&rel=0&modestbranding=1&controls=1&iv_load_policy=3"
    frameborder="0"
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
    allowfullscreen
    style="width:100%; height:100%;"
  ></iframe>

  <!-- غطاء علوي لإخفاء زر المشاركة + شعار YouTube -->
  <div style="
    position:absolute;
    top:0; right:0;
    width:80px; height:40px;
    background:rgba(0,0,0,0.6);
    border-bottom-left-radius:8px;
    pointer-events:none;
  "></div>
</div>


        <!-- غطاء لإخفاء شعار يوتيوب وزر المشاركة -->
        <div style="
          position:absolute;
          top:0; left:0;
          width:100%; height:30px;
          background:linear-gradient(to bottom, rgba(0,0,0,0.8), transparent);
          pointer-events:none;
        "></div>

        <div style="
          position:absolute;
          bottom:0; left:0;
          width:100%; height:30px;
          background:linear-gradient(to top, rgba(0,0,0,0.8), transparent);
          pointer-events:none;
        "></div>
      </div>
    `;
  };
</script>

        </div>

     

</main>

<!-- ⭐️ التقييم -->
<div id="rating-section">
<h3>: قيّم الدورة</h3>
  <div class="stars">
    <span class="star" data-value="1">&#9733;</span>
    <span class="star" data-value="2">&#9733;</span>
    <span class="star" data-value="3">&#9733;</span>
    <span class="star" data-value="4">&#9733;</span>
    <span class="star" data-value="5">&#9733;</span>
  </div>
  <p id="rating-value-display">0/5</p>
  <textarea id="userComment" placeholder="اكتب رأيك (اختياري)"></textarea>
  <button id="submitRating">إرسال التقييم</button>
  <p id="ratingMessage"></p>
  <p id="average-rating"></p>
</div>

<section class="contact-form" id="support">
  <h2>هل لديك سؤال؟</h2>
  <form id="questionForm">
    <input type="text" name="name" id="name" placeholder="الاسم الكامل" required />
    <input type="email" name="email" id="email" placeholder=" البريد الإلكتروني أو رقم الهاتف" required />
    <textarea name="message" id="message" rows="5" placeholder="اكتب رسالتك هنا..." required></textarea>
    <button type="submit">إرسال</button>
    <p id="support-message" style="margin-top:1rem; color:green;"></p>
  </form>
</section>

<footer class="main-footer" dir="rtl">
  <div class="footer-content">
    <!-- عن المنصة -->
    <div class="footer-section about">
      <h3>عن المنصة</h3>
      <p>منصة جزائرية تعليمية موجهة لطلبة الجامعات، تقدم دورات مبسطة، ملفات PDF، وفيديوهات مباشرة مع أساتذة مؤهلين.</p>
   <p style="color: rgb(255, 42, 42); font-weight: bold; margin-top: 10px;">
  ⚠️ تنبيه هام: جميع الفيديوهات المعروضة على منصة Derradj Academy محمية بموجب حقوق الملكية الفكرية.  
  يُمنع منعًا باتًا نسخها أو تحميلها أو مشاركتها بأي وسيلة كانت.  
  أي خرق لهذه القواعد يُعد انتهاكًا قانونيًا صريحًا، ويعرّض مرتكبه للملاحقة القضائية دون سابق إنذار.
</p>

    </div>

    <!-- روابط سريعة -->
    <div class="footer-section links">
      <h3>روابط سريعة</h3>
      <ul>
        <li><a href="/">الرئيسية</a></li>
        <li><a href="#why-us">لماذا نحن؟</a></li>
        <li><a href="#pay-methods-section">طرق الدفع</a></li>
        <li><a href="sign-up/sign-up.html">إنشاء حساب</a></li>
        <li><a href="All playlist/all-playlists.html">الدورات</a></li>
      </ul>
    </div>

    <!-- تواصل معنا -->
    <div class="footer-section contact">
      <h3>تواصل معنا</h3>
<p>
  <strong>📞</strong>
  <a href="tel:+213555491316" dir="ltr">+213 555 49 13 16</a>
</p>
      <p><strong>📧</strong> <a href="mailto:abdellahderradj918@gmail.com">abdellahderradj918@gmail.com
</a></p>
      <p><strong>📍</strong> الجزائر، الجزائر العاصمة</p>
    </div>
  </div>

  <div class="footer-bottom">
    <p>جميع الحقوق محفوظة &copy; 2025 - Derradj Academy</p>
  </div>
</footer>
<script>
function showReceiptUpload() {
  const duration = document.getElementById('sessionDuration').value;
  const section = document.getElementById('uploadSection');
  section.style.display = duration ? 'flex' : 'none';
}

function submitBooking() {
  const duration = document.getElementById('sessionDuration').value;
  const file = document.getElementById('paymentReceipt').files[0];

  if (!duration || !file) {
    alert('Please choose a duration and upload the receipt.');
    return;
  }

  // يمكنك تعديل هذا الجزء لحفظ البيانات في Supabase لاحقًا
  alert(`Session booked for ${duration} min. Receipt uploaded.`);
}
</script>
<script>
  function logout() {
    localStorage.clear();
    window.location.href = '../login/login.html'; // تأكد من المسار الصحيح
  }
</script>
<script>
// ✅ منع فتح أدوات المطور - F12, Ctrl+U, Ctrl+Shift+I/J/C
document.addEventListener('keydown', function (e) {
  const key = e.key.toLowerCase();
  if (
    e.key === 'F12' ||
    (e.ctrlKey && key === 'u') ||
    (e.ctrlKey && e.shiftKey && ['i', 'j', 'c'].includes(key))
  ) {
    e.preventDefault();
    e.stopPropagation();
    return false;
  }
});

// ✅ منع الزر الأيمن تمامًا
document.addEventListener('contextmenu', function (e) {
  e.preventDefault();
  return false;
});

// ✅ مراقبة DevTools وقطع الاتصال إذا تم فتحها
(function () {
  let open = false;
  const threshold = 160;

  setInterval(() => {
    const widthThreshold = window.outerWidth - window.innerWidth > threshold;
    const heightThreshold = window.outerHeight - window.innerHeight > threshold;
    if (widthThreshold || heightThreshold) {
      if (!open) {
        open = true;
        document.body.innerHTML = ""; // إزالة كل المحتوى
      }
    } else {
      open = false;
    }
  }, 500);
})();
</script>
<script src="../js/protect.js"></script>
<script>
(function () {
  // غيّر الرابط إلى صفحة الطرد/التحذير التي تريدها
  const TARGET_URL = "../../index.html";

  function leave() {
    // replace يمنع الرجوع بزر الرجوع إلى الصفحة السابقة
    window.location.replace(TARGET_URL);
  }

  // 1) التقاط ضغطة الزر الأيمن (أقوى مع طور الالتقاط capture)
  function onContextMenu(e) {
    e.preventDefault();
    e.stopPropagation();
    leave();
  }
  window.addEventListener("contextmenu", onContextMenu, { capture: true });

  // 2) احتياط: التقاط زر الماوس الأيمن مباشرة
  window.addEventListener("mousedown", function (e) {
    if (e.button === 2) {
      e.preventDefault();
      e.stopPropagation();
      leave();
    }
  }, { capture: true });

  // 3) للجوال: محاولة كشف الضغط المطوّل (قد يفتح قائمة سياق في بعض المتصفحات)
  let pressTimer;
  window.addEventListener("touchstart", function () {
    pressTimer = setTimeout(leave, 600);
  }, { passive: true });
  window.addEventListener("touchend", function () {
    clearTimeout(pressTimer);
  });
})();
</script>


</body>
</html>
