<!DOCTYPE html>
<html lang="en" translate="no">
<head>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.38.3"></script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Teacher Dashboard - Derradj Academy</title>

  <!-- CSS -->
  <link rel="stylesheet" href="teacher-dashboard.css" />

  <!-- Favicon -->
  <link rel="icon" type="image/jpeg" href="../Logo.jpg" />

  <!-- Scripts -->
  <script src="../js/search.js" defer></script>
  <!-- Chart.js for income visualization (load before dashboard module) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
  <script type="module" src="teacher-dashboard.js" defer></script>

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-F5XDHSVTPG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-F5XDHSVTPG');
</script>
</head>
<body>

<!-- HEADER Ø§Ù„Ù…Ø´ØªØ±Ùƒ Ù…Ø¹ Ø§Ù„Ù…Ù†ØµØ© -->
<header class="main-header">
  <div class="left-section">
    <a href="" class="logo">
      <span class="purple">D</span>erradj Academy
    </a>


  </div>


  <nav class="right-links">
    <button id="logoutBtn" class="btn signup">Log out</button>
  </nav>
</header>

<!-- MAIN CONTENT -->
<main class="dashboard">
  <div class="cards" aria-label="Statistics cards">
    <div class="card" role="region" aria-labelledby="students-enrolled-title">
      <h3 id="students-enrolled-title">ğŸ‘¨â€ğŸ“ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø³Ø¬Ù‘Ù„ÙˆÙ†</h3>
      <div class="value" id="studentCount" aria-live="polite" aria-atomic="true">...</div>
    </div>


    <div class="card" role="region" aria-labelledby="total-earnings-title">
      <h3 id="total-earnings-title">
        <a style="text-decoration: none; color: inherit; cursor: pointer;">
ğŸ’° Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ (Ø¯Ø¬)        </a>
      </h3>
      <div class="value" id="totalEarnings" aria-live="polite" aria-atomic="true">...</div>
    </div>
  </div>

  <!-- Income chart for last 30 days -->
  <section class="income-chart" aria-label="Income last 30 days" style="margin-top:1.5rem;">
    <div style="display:flex; justify-content:space-between; align-items:center; gap:12px;">
      <h3 dir="rtl" style="direction: rtl; text-align: right; color:#4c1d95; margin:0;">ğŸ“ˆ Ø§Ù„Ø¯Ø®Ù„</h3>
      <div style="display:flex; gap:8px; align-items:center;">
        <label for="incomeRangeSelect" style="font-size:0.95rem; color:#4c1d95;"></label>
        <select id="incomeRangeSelect" aria-label="Ø§Ø®ØªØ± Ø§Ù„Ù†Ø·Ø§Ù‚" style="padding:6px 8px; border-radius:6px; border:1px solid #ddd;">
          <option value="7">Ø¢Ø®Ø± Ø£Ø³Ø¨ÙˆØ¹</option>
          <option value="14">Ø¢Ø®Ø± Ø£Ø³Ø¨ÙˆØ¹ÙŠÙ†</option>
          <option value="30" selected>Ø¢Ø®Ø± Ø´Ù‡Ø± (30 ÙŠÙˆÙ…)</option>
          <option value="60">Ø¢Ø®Ø± Ø´Ù‡Ø±ÙŠÙ†</option>
          <option value="90">Ø¢Ø®Ø± 3 Ø£Ø´Ù‡Ø±</option>
          <option value="all">Ø§Ù„ÙƒÙ„ (Ø­ØªÙ‰ 365 ÙŠÙˆÙ…)</option>
        </select>
      </div>
    </div>

    <div style="width:100%; max-width:980px; background:#fff; padding:12px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.04); margin-top:8px;">
      <canvas id="incomeChart" height="140"></canvas>
    </div>
  </section>

  <section class="teacher-subjects" aria-label="Subjects you teach">
<h3 dir="rtl" style="direction: rtl; text-align: right;">ğŸ’° Ø§Ù„Ø¯Ø®Ù„ Ø­Ø³Ø¨ Ø§Ù„Ù…Ø§Ø¯Ø©</h3>
    <ul id="subjectsList" role="list">
      <!-- Ø§Ù„Ù…ÙˆØ§Ø¯ ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ Ø¨Ø±Ù…Ø¬ÙŠØ§Ù‹ -->
    </ul>
  </section>
</main>

<!-- LOGOUT FUNCTION -->
<script>
  document.getElementById('logoutBtn')?.addEventListener('click', () => {
    localStorage.clear();
    window.location.href = '../login/login.html';
  });
</script>


</body>
</html>
